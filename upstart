<mxfile host="app.diagrams.net" modified="2022-04-08T18:27:22.129Z" agent="5.0 (Windows)" etag="8hedlMBugki-xgAgYP6_" version="17.4.1" type="github">
  <diagram id="F93qstNQH2RDCQOcPOFn" name="Page-1">
    <mxGraphModel dx="1038" dy="556" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="_EIu03rBJG7eRLGevVbL-1" value="&lt;div&gt;online chess system&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;FR:&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;play chess: user -&amp;gt; find opponent -&amp;gt; start game -&amp;gt; place a chess -&amp;gt; wait for opponent to pplace -&amp;gt; place ... -&amp;gt; win or lose. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;replay: game is finished, user play the replayã€‚ every move + ts .&amp;nbsp;&amp;nbsp;&amp;nbsp; -&amp;gt; save game every step in db.&amp;nbsp;&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;optiona;:&amp;nbsp; login,&amp;nbsp; leaderboard,&amp;nbsp; user action history, &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NFR:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;cap:  best player,  millions , 100 con, big scale,  small --&amp;gt; best,   &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;avail &amp;gt; consitency , &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;user exp: medium low latency&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;security:  player can not cheat, can not mody score, game status,   follow rule. &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;data durablity: replay store:  forever,    &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Cap : &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;DAU  10M  user,s, 5game/user/day , 1game: 100steps,  10M x 5 x 100 = 5B steps/day, -&amp;gt; 50k qps --&amp;gt; place a chess qps, &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;data storage:  50M games , 1 game 1KB, , --&amp;gt; 50GB /day , -&amp;gt; yaearly 15TB &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;external API:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;place a chess: &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;POST api/v1/game/id/state,  head: user toekn, , body: move payload {place of the chess} -&amp;gt; resp: 200, 4xx, 5xx, , 200 { new state: , if it is a win or lose}	&lt;/span&gt;&lt;span&gt;	&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;watch replay:&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;	&lt;/span&gt;GET api/v1/replays? game_id =xxxx, header: token -&amp;gt; response: { full history: a file ( lines of movements, each movenment: state of game ()) } &lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;	&lt;/span&gt;GET &lt;span&gt;api/v1/replays? game_id =xxxx &amp;amp;&amp;amp; offset=?? and cur)pos =??&amp;nbsp; &lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;arch:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="730" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
