<mxfile host="app.diagrams.net" modified="2022-02-18T04:31:38.269Z" agent="5.0 (Windows)" etag="Fh5HoL_dTF-vuuGkOn9p" version="16.2.6" type="github">
  <diagram id="P7OrWHjs3X4PMyEPvxp_" name="Page-1">
    <mxGraphModel dx="865" dy="440" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="NG6hnDH-HK16yTQhqo3r-1" value="&lt;div&gt;req:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;- get, set&lt;/div&gt;&lt;div&gt;- evict &lt;br&gt;&lt;/div&gt;&lt;div&gt;- scale&lt;/div&gt;&lt;div&gt;- fast&lt;/div&gt;&lt;div&gt;- available&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;then I&#39;ll go thru workflow, arch, deepdive, wrapup: &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;workflow:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;user -&amp;gt; put key, value&lt;/div&gt;&lt;div&gt;user -&amp;gt; read key, value&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;arch: &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;user -&amp;gt;&amp;nbsp;&amp;nbsp; Cache&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;birdview:&lt;/div&gt;&lt;div&gt;- client side lb or srever side lb , or other lb (gossip)&amp;nbsp; ?&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - tradeoff:&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;c-lb: &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;s-lb:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;o-lb:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;then arch:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="50" width="630" height="30" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-8" value="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" edge="1" parent="1" source="NG6hnDH-HK16yTQhqo3r-6" target="NG6hnDH-HK16yTQhqo3r-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-13" value="3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=70;entryDy=80;entryPerimeter=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" edge="1" parent="1" source="NG6hnDH-HK16yTQhqo3r-6" target="NG6hnDH-HK16yTQhqo3r-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="175" y="770" />
              <mxPoint x="620" y="770" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-6" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="160" y="570" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-9" value="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" edge="1" parent="1" source="NG6hnDH-HK16yTQhqo3r-7" target="NG6hnDH-HK16yTQhqo3r-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="320" y="650" />
              <mxPoint x="190" y="650" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-7" value="routing table" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="260" y="500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-10" value="host 3" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="480" y="470" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-11" value="host 2" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="560" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-12" value="host 1" style="shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=none;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="550" y="670" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="NG6hnDH-HK16yTQhqo3r-14" value="&lt;div&gt;routing table:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;qps:&amp;nbsp; low, 1 / 10s, &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;api: &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;mechanism:&amp;nbsp; give key, calculate routing hosts, &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;fault tolerant:&amp;nbsp; cache result locally.&amp;nbsp;&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;solution: zookeeper&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;scale:&amp;nbsp; add hosts, consistent hashing, distribute data&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;&lt;/div&gt;&lt;div&gt;cache cluster:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;qps: extremely high&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;api:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;est: data size:&amp;nbsp; memory:&amp;nbsp; network:&amp;nbsp; thruput:&amp;nbsp;&amp;nbsp; ~ 1k hosts. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;mechanism: NIO network + single thread memory worker.&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre&quot;&gt;	&lt;/span&gt;fault tolerance:&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;blockquote&gt;&lt;blockquote&gt;&lt;div&gt;1. replica:&amp;nbsp; replica is static:&amp;nbsp;&amp;nbsp; anti entropy&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;2. hot key:&amp;nbsp; add index: key_1, key_2,&amp;nbsp; ;&amp;nbsp; use dedicated hosts;&amp;nbsp; virtual nodes.&amp;nbsp;&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;3. cold start:&amp;nbsp; how to load starting keys. &lt;br&gt;&lt;/div&gt;&lt;div&gt;4. colo switch: what if whole colo crash . &lt;br&gt;&lt;/div&gt;&lt;div&gt;5. &lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="90" y="810" width="710" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
